local UIS = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

local Player = Players.LocalPlayer
local PlayerGui = Player.PlayerGui
local Camera = workspace.CurrentCamera
local Flying = false
local moveStep = 0.6
local flyConnection = nil
local holdY = nil

local KillAuraActive = false
local FOVCircle = nil
local FOVRadius = 100
local TargetPlayer = nil
local auraConnection = nil
local originalPos = nil

-- GUI Variables
local ScreenGui = nil
local MainFrame = nil
local isGuiVisible = false
local dragging = false
local dragStart = nil
local startPos = nil

-- KEY SYSTEM (gizli)
local Key = "LIGHT"
local KeyEntered = false

-- FLY (undetected) - Q ve E tuÅŸlarÄ± kaldÄ±rÄ±ldÄ±
local function startFly()
    local char = Player.Character
    if not char then return end
    
    local rootPart = char:WaitForChild("HumanoidRootPart")
    local hum = char:WaitForChild("Humanoid")
    
    Flying = true
    hum.PlatformStand = true
    holdY = rootPart.Position.Y
    
    flyConnection = RunService.Heartbeat:Connect(function()
        local moveVec = Vector3.zero
        
        if UIS:IsKeyDown(Enum.KeyCode.W) then moveVec += Camera.CFrame.LookVector end
        if UIS:IsKeyDown(Enum.KeyCode.S) then moveVec -= Camera.CFrame.LookVector end
        if UIS:IsKeyDown(Enum.KeyCode.A) then moveVec -= Camera.CFrame.RightVector end
        if UIS:IsKeyDown(Enum.KeyCode.D) then moveVec += Camera.CFrame.RightVector end
        
        if moveVec.Magnitude > 0 then
            moveVec = moveVec.Unit * moveStep
            local newPos = rootPart.CFrame.Position + moveVec
            rootPart.CFrame = CFrame.lookAt(newPos, newPos + (Camera.CFrame.LookVector * 2))
            
            task.delay(0.00001, function()
                if Flying then
                    local newPos2 = rootPart.CFrame.Position + moveVec
                    rootPart.CFrame = CFrame.lookAt(newPos2, newPos2 + (Camera.CFrame.LookVector * 2))
                end
            end)
            
            holdY = rootPart.Position.Y
        else
            local pos = rootPart.Position
            rootPart.CFrame = CFrame.lookAt(Vector3.new(pos.X, holdY, pos.Z), Vector3.new(pos.X, holdY, pos.Z) + (Camera.CFrame.LookVector * 2))
        end
        
        rootPart.AssemblyLinearVelocity = Vector3.zero
        rootPart.AssemblyAngularVelocity = Vector3.zero
    end)
end

local function stopFly()
    local char = Player.Character
    if not char then return end
    
    local rootPart = char:FindFirstChild("HumanoidRootPart")
    local hum = char:FindFirstChild("Humanoid")
    
    Flying = false
    if hum then hum.PlatformStand = false end
    
    if flyConnection then
        flyConnection:Disconnect()
        flyConnection = nil
    end
    
    if rootPart then
        rootPart.AssemblyLinearVelocity = Vector3.zero
        rootPart.AssemblyAngularVelocity = Vector3.zero
    end
end

-- FOV CIRCLE
local function createFOV()
    FOVCircle = Drawing.new("Circle")
    FOVCircle.Visible = false
    FOVCircle.Radius = FOVRadius
    FOVCircle.Color = Color3.fromRGB(255, 100, 100)
    FOVCircle.Thickness = 2
    FOVCircle.Filled = false
    FOVCircle.Transparency = 1
end

-- FOV CHECK
local function isInFOV(targetPos)
    local screenPos, onScreen = Camera:WorldToViewportPoint(targetPos)
    if not onScreen then return false end
    
    local center = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
    local distance = (Vector2.new(screenPos.X, screenPos.Y) - center).Magnitude
    return distance <= FOVRadius
end

-- IMPROVED KILL AURA (FOV + G teleport)
local function findNearestEnemyInFOV()
    local char = Player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return nil end
    
    local nearest = nil
    local shortestDist = math.huge
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= Player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChild("Humanoid") then
            local humanoid = player.Character.Humanoid
            if humanoid.Health > 0 then
                local targetPos = player.Character.HumanoidRootPart.Position
                local dist = (char.HumanoidRootPart.Position - targetPos).Magnitude
                
                if isInFOV(targetPos) and dist < shortestDist and dist < 300 then
                    shortestDist = dist
                    nearest = player
                end
            end
        end
    end
    return nearest
end

local function gTeleportKill(target)
    local char = Player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    
    originalPos = char.HumanoidRootPart.CFrame
    
    local targetChar = target.Character
    if not targetChar or not targetChar:FindFirstChild("HumanoidRootPart") then return end
    
    -- HEDEF Ä°Ã‡Ä°NE GÄ°R
    local targetCenter = targetChar.HumanoidRootPart.Position + Vector3.new(0, 3, 0)
    char.HumanoidRootPart.CFrame = CFrame.new(targetCenter)
    
    -- 5x E SPAM
    for i = 1, 5 do
        UIS.InputBegan:Fire(Enum.KeyCode.E)
        task.wait(0.05)
        UIS.InputEnded:Fire(Enum.KeyCode.E)
        task.wait(0.05)
    end
    
    -- GERÄ° DÃ–N
    task.wait(0.2)
    if originalPos then
        char.HumanoidRootPart.CFrame = originalPos
    end
end

local function startKillAura()
    KillAuraActive = true
    FOVCircle.Visible = true
    
    auraConnection = RunService.Heartbeat:Connect(function()
        if not KillAuraActive then return end
        
        FOVCircle.Position = Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)
        
        TargetPlayer = findNearestEnemyInFOV()
        if TargetPlayer then
            FOVCircle.Color = Color3.fromRGB(0, 255, 0)
        else
            FOVCircle.Color = Color3.fromRGB(255, 100, 100)
        end
    end)
end

local function stopKillAura()
    KillAuraActive = false
    TargetPlayer = nil
    if FOVCircle then FOVCircle.Visible = false end
    if auraConnection then auraConnection:Disconnect() auraConnection = nil end
end

-- GUI
local function createGui()
    ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "HackerAI_Gui"
    ScreenGui.Parent = PlayerGui
    ScreenGui.ResetOnSpawn = false
    
    -- LOGIN (key gizli)
    local LoginFrame = Instance.new("Frame")
    LoginFrame.Name = "LoginFrame"
    LoginFrame.Size = UDim2.new(0, 350, 0, 200)
    LoginFrame.Position = UDim2.new(0.5, -175, 0.5, -100)
    LoginFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    LoginFrame.BorderSizePixel = 0
    LoginFrame.Parent = ScreenGui
    
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 12)
    UICorner.Parent = LoginFrame
    
    local Gradient = Instance.new("UIGradient")
    Gradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(45, 45, 60)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 35))
    }
    Gradient.Parent = LoginFrame
    
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 50)
    Title.Position = UDim2.new(0, 0, 0, 20)
    Title.BackgroundTransparency = 1
    Title.Text = "ðŸ”¥ HackerAI Menu"
    Title.TextColor3 = Color3.fromRGB(255, 120, 120)
    Title.TextScaled = true
    Title.Font = Enum.Font.GothamBold
    Title.Parent = LoginFrame
    
    local KeyBox = Instance.new("TextBox")
    KeyBox.Size = UDim2.new(0.8, 0, 0, 40)
    KeyBox.Position = UDim2.new(0.1, 0, 0, 90)
    KeyBox.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
    KeyBox.Text = ""
    KeyBox.PlaceholderText = "Enter Key..."
    KeyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    KeyBox.TextScaled = true
    KeyBox.Font = Enum.Font.Gotham
    KeyBox.Parent = LoginFrame
    
    local KeyCorner = Instance.new("UICorner")
    KeyCorner.CornerRadius = UDim.new(0, 8)
    KeyCorner.Parent = KeyBox
    
    local VerifyBtn = Instance.new("TextButton")
    VerifyBtn.Size = UDim2.new(0.8, 0, 0, 45)
    VerifyBtn.Position = UDim2.new(0.1, 0, 0, 140)
    VerifyBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
    VerifyBtn.Text = "VERIFY"
    VerifyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    VerifyBtn.TextScaled = true
    VerifyBtn.Font = Enum.Font.GothamBold
    VerifyBtn.Parent = LoginFrame
    
    local BtnCorner = Instance.new("UICorner")
    BtnCorner.CornerRadius = UDim.new(0, 8)
    BtnCorner.Parent = VerifyBtn
    
    -- MAIN MENU (draggable)
    MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 400, 0, 300)
    MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
    MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    MainFrame.BorderSizePixel = 0
    MainFrame.Visible = false
    MainFrame.Parent = ScreenGui
    MainFrame.Active = true
    MainFrame.Draggable = true  -- TAÅžINABÄ°LÄ°R!
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 12)
    MainCorner.Parent = MainFrame
    
    local MainGradient = Instance.new("UIGradient")
    MainGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(45, 45, 60)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 35))
    }
    MainGradient.Parent = MainFrame
    
    local MainTitle = Instance.new("TextLabel")
    MainTitle.Size = UDim2.new(1, 0, 0, 50)
    MainTitle.Position = UDim2.new(0, 0, 0, 10)
    MainTitle.BackgroundTransparency = 1
    MainTitle.Text = "âš¡ HackerAI MAIN MENU"
    MainTitle.TextColor3 = Color3.fromRGB(120, 255, 120)
    MainTitle.TextScaled = true
    MainTitle.Font = Enum.Font.GothamBold
    MainTitle.Parent = MainFrame
    
    -- Fly Button (F key sync)
    local FlyBtn = Instance.new("TextButton")
    FlyBtn.Name = "FlyBtn"
    FlyBtn.Size = UDim2.new(0.85, 0, 0, 50)
    FlyBtn.Position = UDim2.new(0.075, 0, 0, 80)
    FlyBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 255)
    FlyBtn.Text = "âœˆï¸ FLY [OFF] (F)"
    FlyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    FlyBtn.TextScaled = true
    FlyBtn.Font = Enum.Font.GothamBold
    FlyBtn.Parent = MainFrame
    
    local FlyCorner = Instance.new("UICorner")
    FlyCorner.CornerRadius = UDim.new(0, 8)
    FlyCorner.Parent = FlyBtn
    
    -- KillAura Button (FOV)
    local KillBtn = Instance.new("TextButton")
    KillBtn.Name = "KillBtn"
    KillBtn.Size = UDim2.new(0.85, 0, 0, 50)
    KillBtn.Position = UDim2.new(0.075, 0, 0, 150)
    KillBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
    KillBtn.Text = "ðŸ”ª FOV KILLAURA [OFF] (G)"
    KillBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    KillBtn.TextScaled = true
    KillBtn.Font = Enum.Font.GothamBold
    KillBtn.Parent = MainFrame
    
    local KillCorner = Instance.new("UICorner")
    KillCorner.CornerRadius = UDim.new(0, 8)
    KillCorner.Parent = KillBtn
    
    -- Close Button
    local CloseBtn = Instance.new("TextButton")
    CloseBtn.Size = UDim2.new(0.85, 0, 0, 40)
    CloseBtn.Position = UDim2.new(0.075, 0, 0, 230)
    CloseBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    CloseBtn.Text = "âŒ CLOSE"
    CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    CloseBtn.TextScaled = true
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.Parent = MainFrame
    
    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 8)
    CloseCorner.Parent = CloseBtn
    
    -- BUTTON EVENTS
    VerifyBtn.MouseButton1Click:Connect(function()
        if KeyBox.Text == Key then
            LoginFrame:Destroy()
            MainFrame.Visible = true
            KeyEntered = true
            createFOV()
            print("âœ… Authorized!")
        else
            KeyBox.Text = ""
            KeyBox.PlaceholderText = "âŒ Wrong Key!"
        end
    end)
    
    FlyBtn.MouseButton1Click:Connect(function()
        if Flying then
            stopFly()
            FlyBtn.Text = "âœˆï¸ FLY [OFF] (F)"
            FlyBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 255)
        else
            startFly()
            FlyBtn.Text = "âœˆï¸ FLY [ON] (F)"
            FlyBtn.BackgroundColor3 = Color3.fromRGB(80, 160, 255)
        end
    end)
    
    KillBtn.MouseButton1Click:Connect(function()
        if KillAuraActive then
            stopKillAura()
            KillBtn.Text = "ðŸ”ª FOV KILLAURA [OFF] (G)"
            KillBtn.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
        else
            startKillAura()
            KillBtn.Text = "ðŸ”ª FOV KILLAURA [ON] (G)"
            KillBtn.BackgroundColor3 = Color3.fromRGB(255, 120, 120)
        end
    end)
    
    CloseBtn.MouseButton1Click:Connect(function()
        MainFrame.Visible = false
    end)
end

-- KEYS
UIS.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.Insert then
        if not ScreenGui then createGui() end
        if not KeyEntered then
            ScreenGui.LoginFrame.Visible = not ScreenGui.LoginFrame.Visible
        else
            ScreenGui.MainFrame.Visible = not ScreenGui.MainFrame.Visible
        end
    
    elseif input.KeyCode == Enum.KeyCode.F and KeyEntered then
        if Flying then
            stopFly()
            if ScreenGui and ScreenGui.MainFrame.FlyBtn then
                ScreenGui.MainFrame.FlyBtn.Text = "âœˆï¸ FLY [OFF] (F)"
                ScreenGui.MainFrame.FlyBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 255)
            end
        else
            startFly()
            if ScreenGui and ScreenGui.MainFrame.FlyBtn then
                ScreenGui.MainFrame.FlyBtn.Text = "âœˆï¸ FLY [ON] (F)"
                ScreenGui.MainFrame.FlyBtn.BackgroundColor3 = Color3.fromRGB(80, 160, 255)
            end
        end
    
    elseif input.KeyCode == Enum.KeyCode.G and KillAuraActive and KeyEntered then
        TargetPlayer = findNearestEnemyInFOV()
        if TargetPlayer then
            gTeleportKill(TargetPlayer)
        end
    end
end)

Player.CharacterAdded:Connect(function()
    task.wait(2)
    if Flying then startFly() end
    if KillAuraActive then startKillAura() end
end)

print("ðŸŽ® HackerAI | INSERT=Menu | Key:LIGHT | F=Fly | G=TPKill")
